<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
</h:head>
<h:body>
	<ui:composition template="/page/templates/layout.xhtml">
	
			<ui:define name="metadata">
							<f:metadata>
											<f:viewParam id="confVP" name="confId" value="#{exportBean.confId}" required="true"
															requiredMessage="#{mdLabels['missingConfId']}" />
							</f:metadata>
			</ui:define>
			
			<ui:define name="center">
				<f:subview id="mdExportDataset">
						<h:form id="exportDsForm"  >
							<h:panelGrid >
							
								<h:outputText value="#{mdLabels['exportDataset_text']}" />
								<h:selectOneListbox id="dsSelectMappingLB" value="#{exportBean.selectedMapping}" required="true">
									<f:selectItems value="#{exportBean.mappings}" var="map" itemValue="#{map.id}" itemLabel="#{map.label}" itemDescription="#{map.describtion}"/>
								</h:selectOneListbox>
								
								<h:commandButton id="exportDsBt" value="#{mdLabels['exportDataset_bt']}">
									<f:ajax event="click" execute="@form" render="resultPanel" listener="#{exportBean.exportDataset}"/>
								</h:commandButton>
								</h:panelGrid>
						
								<h:panelGroup id="resultPanel">
									<h:outputText id="exportDownloadTxt1" value="#{mdLabels['exportDataset_accessPre']} "  rendered="#{exportBean.resultLink != null}"/>
									<h:outputLink value="#{exportBean.resultLink}"  rendered="#{exportBean.resultLink != null}" target="_blank">
										<h:outputText value="#{exportBean.resultLabel}" />
									</h:outputLink>
									<h:outputText id="exportDownloadTxt2" value=" #{mdLabels['exportDataset_accessSuf']}"  rendered="#{exportBean.resultLink != null}"/>
								</h:panelGroup>
						
						</h:form>
								
					</f:subview>
			</ui:define>
			
	</ui:composition>
</h:body>
</html>