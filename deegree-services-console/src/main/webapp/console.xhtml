<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:dg="http://deegree.org/jsf"
				xmlns:dgc="http://java.sun.com/jsf/composite/deegree">
<h:head>
				<title>deegree 3 services</title>
				<h:outputStylesheet name="styles.css" />
</h:head>
<h:body>
				<pre><h:outputText value="#{applicationBean.logo}" /></pre>

				<h:form id="reloadForm">
  ...has been successfully installed on this server.
				[<h:commandLink value="Reload" action="#{configManager.applyChanges}" style="margin:0px 10px;">
												<f:ajax execute="@this" render="@form" />
								</h:commandLink>]
				
																<h:panelGroup rendered="#{configManager.pendingChanges}">
												<div class="attention"><h:outputText
																value="#{configManager.lastMessage} (needs
																				reloading)" /></div>
								</h:panelGroup>
								<h:panelGroup rendered="#{!configManager.pendingChanges}">
												<h:outputText value="#{configManager.lastMessage}" />
								</h:panelGroup>

				</h:form>
				<br />
				<dgc:collapsiblePanel styleClass="collapsiblePanel">
								<f:facet name="header">
									  ------------------------------------------------------------------------------  
									  <br />
									    Version information
									  <br />
									  ------------------------------------------------------------------------------
						  	</f:facet>
								<ui:repeat value="#{applicationBean.moduleInfos}" var="moduleInfo">
												<h:outputText value="- #{moduleInfo}" />
												<br />
								</ui:repeat>
				</dgc:collapsiblePanel>


				<dgc:collapsiblePanel styleClass="collapsiblePanel">
								<f:facet name="header">
									  ------------------------------------------------------------------------------  
									  <br />
									    Workspace
									  <br />
									  ------------------------------------------------------------------------------
						  	</f:facet>
								<h:form id="workspaceForm">
												<h:panelGrid columns="1" id="workspace">
																<h:outputText value="- Name: #{applicationBean.workspaceName}" style="margin: 10px 0px;" />
																<h:outputText value="- Directory: #{applicationBean.workspaceDirectory}" />
												</h:panelGrid>
								</h:form>
				</dgc:collapsiblePanel>

				<dgc:collapsiblePanel styleClass="collapsiblePanel">
								<f:facet name="header">
									  ------------------------------------------------------------------------------  
									  <br />
									    Web services
									  <br />
									  ------------------------------------------------------------------------------
						  	</f:facet>
								<h:form>
      [<h:commandLink value="Edit metadata" action="#{configManager.serviceMetadataConfig.edit}" />]
      [<h:commandLink value="Edit global config" action="#{configManager.serviceMainConfig.edit}" />]
												<br />
												<br />
												<ui:repeat value="#{configManager.serviceManager.configs}" var="config">
																<h:outputText value="- #{config.id}:#{config.status}" />
	    [<h:commandLink rendered="#{!config.deactivated}" value="Deactivate" action="#{config.deactivate}" />
																<h:commandLink rendered="#{config.deactivated}" value="Activate" action="#{config.activate}" />]
	    [<h:commandLink value="Edit" action="#{config.edit}" />]
        <h:panelGroup rendered="#{config.active}">	    
	      [<h:outputLink value="#{config.capabilitiesURL}">
																								<h:outputText value="Capabilities" />
																				</h:outputLink>]
																								</h:panelGroup>
																<br />
												</ui:repeat>
								</h:form>
				</dgc:collapsiblePanel>

				<dgc:collapsiblePanel styleClass="collapsiblePanel">
								<f:facet name="header">
									  ------------------------------------------------------------------------------  
									  <br />
									   Feature stores
									  <br />
									  ------------------------------------------------------------------------------
						  	</f:facet>
								<h:form>
												<ui:repeat value="#{configManager.fsManager.configs}" var="config">
																<h:outputText value="- #{config.id}: #{config.status}" />
	    [<h:commandLink rendered="#{!config.deactivated}" value="Deactivate" action="#{config.deactivate}" />
																<h:commandLink rendered="#{config.deactivated}" value="Activate" action="#{config.activate}" />]
	    [<h:commandLink value="Edit" action="#{config.edit}" />]
	    [<h:commandLink value="Delete" action="#{config.delete}" />]
	            
        <h:panelGroup rendered="#{config.active}">
		  			[<h:commandLink value="Info" action="#{config.showInfo}" />]        
          	<h:panelGroup rendered="#{config.sql}">
            	[<h:commandLink value="Setup tables" action="#{config.createTables}" />]
          	</h:panelGroup>
																</h:panelGroup>
																<br />
												</ui:repeat>
												<br />
												<h:panelGroup>
																<h:outputLabel for="newFSBt" value="Add: " />
																<h:inputText id="newFSBt" value="#{newFeatureStoreConfig.id}" size="16" />
																<h:selectOneMenu value="#{newFeatureStoreConfig.type}">
																				<f:selectItems value="#{configManager.fsManager.fsTypes}" />
																</h:selectOneMenu>
																<h:commandButton value="OK" action="#{newFeatureStoreConfig.create}" />
												</h:panelGroup>
								</h:form>
				</dgc:collapsiblePanel>


				<dgc:collapsiblePanel styleClass="collapsiblePanel">
								<f:facet name="header">
									  ------------------------------------------------------------------------------  
									  <br />
									   JDBC connections
									  <br />
									  ------------------------------------------------------------------------------
						  	</f:facet>
								<h:form>
												<ui:repeat value="#{configManager.connManager.configs}" var="config">
																<h:outputText value="- #{config.id}" />: <h:outputText value="#{config.connectionStatus}" />
																	    [<h:commandLink value="Edit" action="#{config.edit}" />]
	    [<h:commandLink value="Delete" action="#{config.delete}" />]
																<br />
												</ui:repeat>
												<br />
												<h:outputLabel for="newJDBCBt" value="Add: " />
												<h:inputText id="newJDBCBt" value="#{newConnectionConfig.id}" size="16" />
												<h:commandButton value="OK" action="#{newConnectionConfig.create}" />
								</h:form>
				</dgc:collapsiblePanel>

				<h:panelGroup id="links" style="margin: 20px; 0px;">
								<h:outputText value="##################################################################################" />
								<br />
								<br />
												[<h:link outcome="/console/client/client.html" value="Generic OGC client" />]  [<dg:externalLink
												target="_blank" href="http://wiki.deegree.org" title="deegree Wiki" />]
      </h:panelGroup>

</h:body>
</html>