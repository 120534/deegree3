<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<h:head>
  <title>deegree 3 services</title>
  <h:outputStylesheet name="styles.css" />
</h:head>
<h:body>
  <pre><h:outputText value="#{applicationBean.logo}" /></pre>
  ...has been successfully installed on this server.
  <br />
  <br />
  <br />Version information<br />
  <br />
  <ui:repeat value="#{applicationBean.moduleInfos}" var="moduleInfo">
    - <h:outputText value="#{moduleInfo}" />
    <br />
  </ui:repeat>
  <h:panelGroup id="configuration">
    <h:form id="requestForm">
      <br />    
      <br />
        Workspace
        [<h:commandLink value="Reload" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
        [<h:commandLink value="Switch" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
      <br />
      <br />      
      - Directory: <h:outputText value="#{applicationBean.workspaceDirectory}" />
      <br />

      <br />
      <br />
        JDBC connections
        [<h:commandLink value="Reload" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
        [<h:commandLink value="Add" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
      <br />
      <br />
	  <ui:repeat value="#{applicationBean.connections}" var="connection">
	    - <h:outputText value="#{connection.id}" />: <h:outputText value="#{connection.status}" />
	    [<h:commandLink value="Delete" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]	    
	    <br />
	  </ui:repeat>      

      <br />
      <br />
        Feature stores
        [<h:commandLink value="Reload" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
        [<h:commandLink value="Add" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
      <br />
      <br />
	  <ui:repeat value="#{applicationBean.featureStores}" var="featureStore">
	    - <h:outputText value="#{featureStore}" />
	    [<h:commandLink value="Delete" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
	    <br />
	  </ui:repeat>      
      
      <br />
      <br />
        Web services
        [<h:commandLink value="Reload" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
        [<h:commandLink value="Add" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
        </h:commandLink>]
      <br />
      <br />
      <ui:repeat value="#{applicationBean.nameToController}" var="ntc">
        - <h:outputText value="#{ntc}" />
        <h:outputText value="&#160;" />
        <h:panelGroup rendered="#{ntc == 'WFS'}">
          [<h:commandLink value="Delete" style="text-align: right;">
            <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
            </h:commandLink>]
          [<h:outputLink value="console/#{fn:toLowerCase(ntc)}/index.jsp">Details</h:outputLink>]
          [<h:outputLink value="console/client/client.html">Send requests</h:outputLink>]
        </h:panelGroup>
        <h:panelGroup rendered="#{ntc == 'WPS'}">
          [<h:commandLink value="Delete" style="text-align: right;">
            <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
            </h:commandLink>]        
          [<h:outputLink value="console/#{fn:toLowerCase(ntc)}/index.jsf">Details</h:outputLink>]
          [<h:outputLink value="console/client/client.html">Send requests</h:outputLink>]
        </h:panelGroup>
        <h:panelGroup rendered="#{ntc == 'WMS'}">
          [<h:commandLink value="Delete" style="text-align: right;">
            <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":configuration" />
            </h:commandLink>]        
          [<h:outputLink value="console/#{fn:toLowerCase(ntc)}/index.jsf">Details</h:outputLink>]
          [<h:outputLink value="console/client/client.html">Send requests</h:outputLink>]
        </h:panelGroup>        
        <br />
      </ui:repeat>
    </h:form>
  </h:panelGroup>
  <br />
  <br />Request statistics<br />
  <br />
    - Dispatched: <h:outputText value="#{statisticBean.dispatchedRequests}" />
  <br />
    - Active: <h:outputText value="#{statisticBean.activeRequests}" />
  <br />
    - Average: <h:outputText value="#{statisticBean.averageResponseTime}" /> ms<br />
    - Maximum: <h:outputText value="#{statisticBean.maximumResponseTime}" /> ms<br />
  <br />    
</h:body>
</html>