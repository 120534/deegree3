<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<h:head>
  <title>deegree 3 services</title>
  <h:outputStylesheet name="styles.css" />
</h:head>
<h:body>
  <pre><h:outputText value="#{applicationBean.logo}" /></pre>
  ...has been successfully installed on this server.
  <br />
  <br />  
  ------------------------------------------------------------------------------  
  <br />
    Version information
  <br />
  ------------------------------------------------------------------------------
  <br />  
  <br />  
  <ui:repeat value="#{applicationBean.moduleInfos}" var="moduleInfo">
    - <h:outputText value="#{moduleInfo}" />
    <br />
  </ui:repeat>
      <br/>

      ------------------------------------------------------------------------------
      <h:panelGroup id="workspace">
      <h:form>
        Workspace
        [<h:commandLink value="Reload" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":workspace" />
        </h:commandLink>]
        [<h:commandLink value="Switch" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":workspace" />
        </h:commandLink>]
      <br />                  
      ------------------------------------------------------------------------------
      <br />      
      <br/>      
      - Name: <h:outputText value="#{applicationBean.workspaceName}" /><br/>      
      - Directory: <h:outputText value="#{applicationBean.workspaceDirectory}" />
      <br />
      <br />
      </h:form>
      </h:panelGroup>

      ------------------------------------------------------------------------------
      <h:panelGroup id="services">
      <h:form>          
        Web services
        [<h:commandLink value="Reload" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":services" />
        </h:commandLink>]
        [<h:commandLink value="Add" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":services" />
        </h:commandLink>]
      <br />
      ------------------------------------------------------------------------------      
      <br />
      <ui:repeat value="#{applicationBean.nameToController}" var="ntc">
        - <h:outputText value="#{ntc}" />
        <h:outputText value="&#160;" />
        <h:panelGroup rendered="#{ntc == 'WFS'}">
          [<h:commandLink value="Delete" style="text-align: right;">
            <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":services" />
            </h:commandLink>]
          [<h:outputLink value="console/#{fn:toLowerCase(ntc)}/index.jsp">Details</h:outputLink>]
          [<h:outputLink value="console/client/client.html">Send requests</h:outputLink>]
        </h:panelGroup>
        <h:panelGroup rendered="#{ntc == 'WPS'}">
          [<h:commandLink value="Delete" style="text-align: right;">
            <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":services" />
            </h:commandLink>]        
          [<h:outputLink value="console/#{fn:toLowerCase(ntc)}/index.jsf">Details</h:outputLink>]
          [<h:outputLink value="console/client/client.html">Send requests</h:outputLink>]
        </h:panelGroup>
        <h:panelGroup rendered="#{ntc == 'WMS'}">
          [<h:commandLink value="Delete" style="text-align: right;">
            <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":services" />
            </h:commandLink>]        
          [<h:outputLink value="console/#{fn:toLowerCase(ntc)}/index.jsf">Details</h:outputLink>]
          [<h:outputLink value="console/client/client.html">Send requests</h:outputLink>]
        </h:panelGroup>        
        <br />
        <h:outputText rendered="#{empty applicationBean.nameToController}" value="No services have been defined." />
        <br/>
      </ui:repeat>
      </h:form>
      <br/>      
      
      ------------------------------------------------------------------------------
      <h:panelGroup id="featurestores">
      <h:form>
        Feature stores
        [<h:commandLink value="Reload" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":featurestores" />
        </h:commandLink>]
        [<h:commandLink value="Add" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":featurestores" />
        </h:commandLink>]
      <br />
      ------------------------------------------------------------------------------      
      <br />
	  <ui:repeat value="#{applicationBean.featureStores}" var="featureStore">
	    - <h:outputText value="#{featureStore}" />
	    [<h:commandLink value="Delete" style="text-align: right;">
        <f:ajax listener="#{applicationBean.reloadConfig}" execute="@this" render=":featurestores" />
        </h:commandLink>]
	    <br />
	  </ui:repeat>            
      <br />
      </h:form>
      </h:panelGroup>

	  <h:form>
      <h:panelGroup id="jdbc">
      ------------------------------------------------------------------------------<br />
      JDBC connections<br />
      ------------------------------------------------------------------------------<br />
      <br />      
	  <ui:repeat value="#{connectionsConfig.connections}" var="config">
	    - <h:outputText value="#{config.id}" />: <h:outputText value="#{config.status}" />
	    <h:commandButton value="Edit" action="#{config.edit}"/>
	    <h:commandButton value="Delete" action="#{config.delete}"/>
	    <br />
	  </ui:repeat>
      <br />
      Add: <h:inputText value="#{connectionConfig.id}" size="16"/>
        <h:commandButton value="OK" action="#{connectionConfig.create}"/>      
      </h:panelGroup>
      </h:form>

  </h:panelGroup>    
</h:body>
</html>